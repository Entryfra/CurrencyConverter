Вот как это работает:
MainActivity.kt: Это главный файл с кодом для нашего приложения. Он отвечает за взаимодействие с UI и за логику приложения.
onCreate: Этот метод выполняется при старте приложения. В нем мы инициализируем все элементы UI (ввод суммы, списки валют и т.д.). Мы также вызываем fetchExchangeRates, чтобы получить курсы валют от API.
fetchExchangeRates: Этот метод делает запрос к API https://app.freecurrencyapi.com/, чтобы получить данные о курсах валют.
- Мы используем Retrofit, чтобы отправить запрос к API.
- Мы используем CoroutineScope и withContext(Dispatchers.IO), чтобы выполнить запрос в отдельном потоке и не блокировать главный поток приложения.
- Мы используем Gson для преобразования ответа от API в структуру данных CurrencyRate.
- Мы заполняем списки валют (Spinner) в приложении данными из API.
convertCurrency: Этот метод конвертирует валюту.
- Он использует данные о курсах валют из fetchExchangeRates.
- Он вычисляет конвертированную сумму и отображает ее в TextView.
activity_main.xml: Это файл с описанием интерфейса приложения. Он определяет расположение и стиль элементов UI (например, текстовые поля, списки валют, кнопки).
CurrencyRate.kt: Это модель данных, которая описывает структуру ответа от API https://app.freecurrencyapi.com/. Она содержит базовую валюту, дату и карту с курсами валют.
ExchangeRateApi.kt: Этот интерфейс определяет метод getLatestRates, который используется для запроса курсов валют к API.
RetrofitInstance.kt: Этот объект создает инстанс Retrofit, который используется для отправки запросов к API.
ExchangeRateService.kt: Этот объект предоставляет метод для получения инстанса ExchangeRateApi, который используется для запроса данных к API.
В приложении мы также используем:
Logcat — для отладки и проверки работы приложения.
Toast — для вывода коротких сообщений пользователю.
Используя https://app.freecurrencyapi.com/, мы получаем данные о курсах валют и выполняем конвертацию валют в приложении.
Кря-кря! Надеюсь, это объяснение поможет вам лучше понять, как работает приложение!
